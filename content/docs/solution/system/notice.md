---
weight: 13
title: 通知系统
bookHidden: true
---

# 通知系统

## 系统划分

可以细分为三个子系统：路由系统、存储系统、推送系统。消息先存储再推送，写入和推送分离，保证每条消息至少推送一次。

- 路由系统：监听事件变更，针对不同业务进行消息过滤、鉴权、转换、存储，记录消息各种状态。
- 存储系统：存储消息，可以通过实现顺序写提高性能。为了避免同种类消息频繁推送需要实现消息合并功能。
- 推送系统：通过WebSocket长连接推送消息。可以使用对象池降低GC频率。
